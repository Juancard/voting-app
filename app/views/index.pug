doctype html
html(lang='en')
  head
    meta(charset='utf-8')
    meta(http-equiv='X-UA-Compatible', content='IE=edge')
    meta(name='viewport', content='width=device-width, initial-scale=1')
    meta(name='description', content='Index displays polls and user navbar')
    meta(name='author', content='Juan Cardona')
    title Voting App!
    link(href='/public/css/main.css', rel='stylesheet', type='text/css')
    // BOOTSTRAP
    link(href='/public/bootstrap/css/bootstrap.min.css', rel='stylesheet')
    link(rel='stylesheet', href='//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.min.css')
    // load fontawesome
    // END BOOTSTRAP
  body
    .container
      nav.navbar.navbar-default
        .container-fluid
          // Brand and toggle get grouped for better mobile display
          .navbar-header
            button.navbar-toggle.collapsed(type='button', data-toggle='collapse', data-target='#bs-example-navbar-collapse-1', aria-expanded='false')
              span.sr-only Toggle navigation
              span.icon-bar
              span.icon-bar
              span.icon-bar
            a.navbar-brand(href='/') Voting-app
          // Collect the nav links, forms, and other content for toggling
          #bs-example-navbar-collapse-1.collapse.navbar-collapse
            ul.nav.navbar-nav.navbar-right
              li.active
                a(href='/') Home
              if user
                li
                  a(href='/polls/mypolls') My Polls
                li
                  a(href='/polls/newpoll') New Poll
                li.dropdown
                  a.dropdown-toggle(href='#', data-toggle='dropdown', role='button', aria-haspopup='true', aria-expanded='false')
                    |   #{user.twitter.displayName}
                    span.caret
                  .dropdown-menu.navbar-btn
                      a.btn.btn-block.btn-primary(href='/logout')
                        span.fa.fa-twitter
                        |   Sign out
              else
                li
                  p.navbar-btn
                    a.btn.btn-info(href='/auth/twitter')
                      span.fa.fa-twitter
                      |   Sign in
          // /.navbar-collapse
        // /.container-fluid
      .jumbotron(align='center')
        h1 Voting App!
        p Below are polls hosted by our users.
        p Select a poll to see the results and vote,
          if user
            a(href="/polls/newpoll")  or make a new poll!
          else
            |   or sign-in to make a new poll.

        .list-group
          for poll in polls
            a.list-group-item(href=poll.id) #{poll.title}

    // jQuery (necessary for Bootstrap's JavaScript plugins)
    script(src='https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js')
    // Include all compiled plugins (below), or include individual files as needed
    script(src='/public/bootstrap/js/bootstrap.min.js')
    script(type='text/javascript', src='/common/ajax-functions.js')
